import{g as V,c as C,a as D}from"./useDatabase-o04XfflN.js";import{R as L}from"./ReportCard-0ix7x_j9.js";import{_ as k,d as $,r as a,o as _,c as f,w as r,a as o,b as h,t as F,e as T,n as R,I as S,f as i,g as B,h as E,i as I,j as q,k as Q,F as W}from"./index-CEtYVSE0.js";const j=$({props:{title:{type:String,required:!0},total:{type:Number,required:!0},currentDay:{type:Number,required:!0},isActive:{type:Boolean,default:!1}},emits:["toggleFilter"],setup(e,{emit:l}){return{toggleFilter:()=>{l("toggleFilter",e.title)}}}});function z(e,l,m,v,y,s){const n=a("ion-card-title"),u=a("ion-card-header"),d=a("ion-label"),g=a("ion-card-content"),t=a("ion-card");return _(),f(t,{class:R(["ion-card",[e.isActive?"active":""]]),onClick:e.toggleFilter},{default:r(()=>[o(u,{class:"ion-card-header"},{default:r(()=>[o(n,{class:"ion-card-title"},{default:r(()=>[h(F(e.title),1)]),_:1})]),_:1}),o(g,{class:"ion-card-content"},{default:r(()=>[e.total!=null?(_(),f(d,{key:0,class:"total-records"},{default:r(()=>[h("Всього: "+F(e.total),1)]),_:1})):T("",!0),e.currentDay>0?(_(),f(d,{key:1,class:"per-day"},{default:r(()=>[h("(+"+F(e.currentDay)+" за день)",1)]),_:1})):T("",!0)]),_:1})]),_:1},8,["class","onClick"])}const H=k(j,[["render",z],["__scopeId","data-v-acea3af1"]]),M=$({components:{ReportCard:L,DashboardWidget:H,IonSearchbar:S},setup(){const e=i(null),l=i(0),m=i(0),v=i(0),y=i(0),s=i(null),n=i(""),u=async()=>{e.value=await V(),l.value=await C("300"),m.value=await C("200"),v.value=await D("300"),y.value=await D("200")},d=t=>{s.value===t?s.value=null:s.value=t},g=B(()=>{let t=e.value;if(s.value&&(t=t.filter(p=>p.healthStatus===s.value)),n.value){const p=n.value.toLowerCase().trim();t=t.filter(c=>{var b,w;const A=((b=c.name)==null?void 0:b.toLowerCase().trim())||"",N=((w=c.nickname)==null?void 0:w.toLowerCase().trim())||"";return A.startsWith(p)||N.startsWith(p)})}return t});return E(async()=>{u()}),{reportList:e,count300:l,count200:m,countToday300:v,countToday200:y,toggleFilter:d,activeFilter:s,filteredReports:g,searchQuery:n}}}),P={class:"search-container"};function U(e,l,m,v,y,s){const n=a("dashboard-widget"),u=a("ion-list"),d=a("ion-searchbar"),g=a("report-card"),t=a("ion-content"),p=a("ion-page");return _(),f(p,{style:{"margin-top":"56px"}},{default:r(()=>[o(t,{fullscreen:!0},{default:r(()=>[o(t,null,{default:r(()=>[o(u,{class:"widgets"},{default:r(()=>[o(n,{title:"300",total:e.count300,currentDay:e.countToday300,isActive:e.activeFilter==="300",onToggleFilter:e.toggleFilter,style:{borderColor:"var(--accent-color)"}},null,8,["total","currentDay","isActive","onToggleFilter"]),o(n,{title:"200",total:e.count200,currentDay:e.countToday200,isActive:e.activeFilter==="200",onToggleFilter:e.toggleFilter,style:{borderColor:"var(--danger-color)"}},null,8,["total","currentDay","isActive","onToggleFilter"]),o(n,{title:"4.5.0"})]),_:1}),I("div",P,[o(d,{class:"search-bar",modelValue:e.searchQuery,"onUpdate:modelValue":l[0]||(l[0]=c=>e.searchQuery=c),animated:!0,debounce:500,placeholder:"Пошук за ПІБ або позивним"},null,8,["modelValue"])]),o(u,null,{default:r(()=>[(_(!0),q(W,null,Q(e.filteredReports,c=>(_(),f(g,{report:c,key:c.id},null,8,["report"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})}const O=k(M,[["render",U],["__scopeId","data-v-77e11bdd"]]);export{O as default};
