System.register(["./index-legacy-CifFlaku.js","./useDatabase-legacy-BMNsChtZ.js"],(function(l,e){"use strict";var o,a,t,n,m,i,u,d,r,s,f,c,b,p,g,V,v,h,w,k,y,x,U,_,S,I,B,C,N,D,F;return{setters:[l=>{o=l.d,a=l.p,t=l.q,n=l.s,m=l.v,i=l.x,u=l.y,d=l.z,r=l.A,s=l.f,f=l._,c=l.r,b=l.o,p=l.j,g=l.a,V=l.w,v=l.b,h=l.F,w=l.B,k=l.C,y=l.D,x=l.E,U=l.c,_=l.i,S=l.k,I=l.t,B=l.e},l=>{C=l.p,N=l.s,D=l.u,F=l.d}],execute:function(){var e=document.createElement("style");e.textContent=":deep .label-text{color:#666}.ion-segment[data-v-ca1b6a29]{--background:var(--ion-color-primary);margin-bottom:16px;border-radius:10px}.ion-segment-button[data-v-ca1b6a29]{border-radius:10px;--background: var(--ion-color-primary);--indicator-color: var(--ion-color-primary-focused);--background-checked: var(--ion-color-primary-focused);--color: var(--ion-color-light)}.buttons-block[data-v-ca1b6a29]{display:flex;justify-content:end;width:100%;padding:10px;margin-bottom:0;border-top:#dddddd 1px solid;background-color:#fff;bottom:0}.input-wrapper[data-v-ca1b6a29]{position:relative;flex-grow:1}.autocomplete-tooltip[data-v-ca1b6a29]{position:absolute;z-index:1000;background:#fff;border:1px solid #dcdcdc;border-radius:8px;width:100%;max-height:200px;overflow-y:auto;box-shadow:0 4px 8px rgba(0,0,0,.1);margin-top:-15px}.last-input[data-v-ca1b6a29]{margin-bottom:78.4px}[data-v-ca1b6a29] .label-text{color:#666}\n",document.head.appendChild(e);const P=o({components:{IonButtons:a,IonButton:t,IonModal:n,IonHeader:m,IonContent:i,IonToolbar:u,IonTitle:d,IonInput:r},setup(l,{emit:e}){const o=s(),a=s({nickname:"",name:"",birthdate:"",rank:"",workPosition:"",phone:"",unit:"",unit2:"",unit3:"",unit4:"",unit5:""});return{modal:o,form:a,cancel:()=>o.value.$el.dismiss(null,"cancel"),confirm:async()=>{await C(a.value),e("new-staff",a.value),o.value.$el.dismiss(name,"confirm")},onWillDismiss:async l=>{l.detail.role}}}}),T=o({props:{report:{type:Object,default:()=>({})},type:{type:String,default:"create"}},components:{NewStaffModal:f(P,[["render",function(l,e,o,a,t,n){const m=c("ion-button"),i=c("ion-buttons"),u=c("ion-title"),d=c("ion-toolbar"),r=c("ion-header"),s=c("ion-textarea"),f=c("ion-input"),w=c("ion-content"),k=c("ion-modal");return b(),p(h,null,[g(m,{id:"open-modal",style:{margin:"0 0 16px 10px"},expand:"block",color:"primary"},{default:V((()=>[v(" Створити ")])),_:1}),g(k,{ref:"modal",trigger:"open-modal",onWillDismiss:l.onWillDismiss},{default:V((()=>[g(r,null,{default:V((()=>[g(d,null,{default:V((()=>[g(i,{slot:"start"},{default:V((()=>[g(m,{color:"primary",onClick:e[0]||(e[0]=e=>l.cancel())},{default:V((()=>[v("Cancel")])),_:1})])),_:1}),g(u,null,{default:V((()=>[v("Картка бійця")])),_:1}),g(i,{slot:"end"},{default:V((()=>[g(m,{color:"primary",strong:!0,onClick:e[1]||(e[1]=e=>l.confirm())},{default:V((()=>[v("Confirm")])),_:1})])),_:1})])),_:1})])),_:1}),g(w,{class:"ion-padding"},{default:V((()=>[g(s,{modelValue:l.form.nickname,"onUpdate:modelValue":e[2]||(e[2]=e=>l.form.nickname=e),class:"ion-margin-bottom",label:"Позивний","label-placement":"floating","auto-grow":!0,fill:"outline",mode:"md"},null,8,["modelValue"]),g(f,{modelValue:l.form.name,"onUpdate:modelValue":e[3]||(e[3]=e=>l.form.name=e),class:"ion-margin-bottom",label:"ПІБ","label-placement":"floating",fill:"outline",mode:"md"},null,8,["modelValue"]),g(f,{modelValue:l.form.birthdate,"onUpdate:modelValue":e[4]||(e[4]=e=>l.form.birthdate=e),class:"ion-margin-bottom",label:"Дата народження","label-placement":"floating",fill:"outline",mode:"md"},null,8,["modelValue"]),g(f,{modelValue:l.form.rank,"onUpdate:modelValue":e[5]||(e[5]=e=>l.form.rank=e),class:"ion-margin-bottom",label:"Звання","label-placement":"floating",fill:"outline",mode:"md"},null,8,["modelValue"]),g(f,{modelValue:l.form.workPosition,"onUpdate:modelValue":e[6]||(e[6]=e=>l.form.workPosition=e),class:"ion-margin-bottom",label:"Посада","label-placement":"floating",fill:"outline",mode:"md"},null,8,["modelValue"]),g(f,{modelValue:l.form.phone,"onUpdate:modelValue":e[7]||(e[7]=e=>l.form.phone=e),class:"ion-margin-bottom",type:"number",label:"Телефон","label-placement":"floating",fill:"outline",mode:"md"},null,8,["modelValue"]),g(s,{modelValue:l.form.unit,"onUpdate:modelValue":e[8]||(e[8]=e=>l.form.unit=e),class:"ion-margin-bottom",label:"Відділення","label-placement":"floating","auto-grow":!0,fill:"outline",mode:"md"},null,8,["modelValue"]),g(s,{modelValue:l.form.unit2,"onUpdate:modelValue":e[9]||(e[9]=e=>l.form.unit2=e),class:"ion-margin-bottom",label:"Взвод","label-placement":"floating","auto-grow":!0,fill:"outline",mode:"md"},null,8,["modelValue"]),g(s,{modelValue:l.form.unit3,"onUpdate:modelValue":e[10]||(e[10]=e=>l.form.unit3=e),class:"ion-margin-bottom",label:"Рота","label-placement":"floating","auto-grow":!0,fill:"outline",mode:"md"},null,8,["modelValue"]),g(s,{modelValue:l.form.unit4,"onUpdate:modelValue":e[11]||(e[11]=e=>l.form.unit4=e),class:"ion-margin-bottom",label:"Батальйон","label-placement":"floating","auto-grow":!0,fill:"outline",mode:"md"},null,8,["modelValue"]),g(s,{modelValue:l.form.unit5,"onUpdate:modelValue":e[12]||(e[12]=e=>l.form.unit5=e),class:"ion-margin-bottom",label:"Бригада","label-placement":"floating","auto-grow":!0,fill:"outline",mode:"md"},null,8,["modelValue"])])),_:1})])),_:1},8,["onWillDismiss"])],64)}]]),IonSegment:w,IonSegmentButton:k},setup(l){y();const e=s(!1),o=s({date:"",name:"",nickname:"",birthday:"",unit:"",rank:"",phone:"",location:"",situation:"",witnesses:"",diagnosis:"",help:"",tq:"",state:"",additional:"",lost:"",timePass:"",evacuatedBy:"",healthStatus:""});x((()=>l.report),(l=>{l&&(o.value=l)}),{deep:!0,immediate:!0});const a=s([]),t=s(!1);let n=null;const m=l=>{o.value.name=l.name,o.value.nickname=l.nickname,o.value.phone=l.phone,o.value.unit=l.unit+", "+l.unit2+", "+l.unit3+", "+l.unit4+", "+l.unit5,o.value.rank=l.rank+", "+l.workPosition,o.value.birthday=l.birthday};return{form:o,searchedStaffByNickame:a,onNameChange:async l=>{(null==l?void 0:l.length)>2?(a.value=await N(l),clearTimeout(n),0===a.value.length?n=setTimeout((()=>{0===a.value.length&&(t.value=!0)}),2e3):t.value=!1):(clearTimeout(n),t.value=!1,a.value=[])},showNewStaffModal:t,selectStaff:l=>{m(l),a.value=[]},setStaffData:m,saveReport:async()=>{try{"edit"===l.type?(await D(o.value.id,o.value),window.location.href="/tabs/report/"+o.value.id):(await F(o.value),window.location.href="/tabs/tab1")}catch(e){alert("Помилка збереження репорту"),console.log(e)}},isFocused:e,onFocus:()=>{e.value=!0},onBlur:()=>{setTimeout((()=>{e.value=!1}),150)}}}}),j={style:{display:"flex"}},q={class:"input-wrapper"},M={key:0,class:"autocomplete-tooltip"},W={style:{"font-weight":"bold"}},R={class:"buttons-block",slot:"fixed"};l("R",f(T,[["render",function(l,e,o,a,t,n){const m=c("ion-label"),i=c("ion-segment-button"),u=c("ion-segment"),d=c("ion-input"),r=c("ion-item"),s=c("ion-list"),f=c("new-staff-modal"),w=c("ion-textarea"),k=c("ion-button"),y=c("ion-content");return b(),U(y,{class:"ion-padding"},{default:V((()=>{var o;return[g(u,{modelValue:l.form.healthStatus,"onUpdate:modelValue":e[0]||(e[0]=e=>l.form.healthStatus=e),class:"ion-segment"},{default:V((()=>[g(i,{class:"ion-segment-button",value:"200"},{default:V((()=>[g(m,null,{default:V((()=>[v("200")])),_:1})])),_:1}),g(i,{class:"ion-segment-button",value:"300"},{default:V((()=>[g(m,null,{default:V((()=>[v("300")])),_:1})])),_:1}),g(i,{class:"ion-segment-button",value:"Хвороба"},{default:V((()=>[g(m,null,{default:V((()=>[v("Хвороба")])),_:1})])),_:1})])),_:1},8,["modelValue"]),_("div",j,[_("div",q,[g(d,{modelValue:l.form.nickname,"onUpdate:modelValue":e[1]||(e[1]=e=>l.form.nickname=e),class:"ion-margin-bottom",label:"Позивний (ПІБ)","label-placement":"floating",fill:"outline",mode:"md",debounce:500,onIonFocus:l.onFocus,onIonBlur:l.onBlur,onIonInput:e[2]||(e[2]=e=>l.onNameChange(l.form.nickname,"nickname"))},null,8,["modelValue","onIonFocus","onIonBlur"]),l.isFocused&&l.searchedStaffByNickame.length?(b(),p("div",M,[g(s,null,{default:V((()=>[(b(!0),p(h,null,S(l.searchedStaffByNickame,(e=>(b(),U(r,{key:e.id,onClick:o=>l.selectStaff(e),button:""},{default:V((()=>[g(m,{class:"ion-text-wrap"},{default:V((()=>[_("div",W,I(e.nickname),1),_("div",null,I(e.name),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])):B("",!0)]),"create"===l.type&&l.showNewStaffModal&&(null===(o=l.form.nickname)||void 0===o?void 0:o.length)>3?(b(),U(f,{key:0,onNewStaff:l.setStaffData},null,8,["onNewStaff"])):B("",!0)]),g(d,{modelValue:l.form.name,"onUpdate:modelValue":e[3]||(e[3]=e=>l.form.name=e),class:"ion-margin-bottom",label:"ПІБ","label-placement":"floating",fill:"outline",mode:"md"},null,8,["modelValue"]),g(d,{modelValue:l.form.birthdate,"onUpdate:modelValue":e[4]||(e[4]=e=>l.form.birthdate=e),class:"ion-margin-bottom",label:"Дата народження","label-placement":"floating",fill:"outline",mode:"md"},null,8,["modelValue"]),g(w,{modelValue:l.form.unit,"onUpdate:modelValue":e[5]||(e[5]=e=>l.form.unit=e),class:"ion-margin-bottom",label:"Підрозділ","label-placement":"floating","auto-grow":!0,fill:"outline",mode:"md"},null,8,["modelValue"]),g(d,{modelValue:l.form.rank,"onUpdate:modelValue":e[6]||(e[6]=e=>l.form.rank=e),class:"ion-margin-bottom",label:"Звання, посада","label-placement":"floating",fill:"outline",mode:"md"},null,8,["modelValue"]),g(d,{modelValue:l.form.phone,"onUpdate:modelValue":e[7]||(e[7]=e=>l.form.phone=e),class:"ion-margin-bottom",type:"number",label:"Телефон","label-placement":"floating",fill:"outline",mode:"md"},null,8,["modelValue"]),g(d,{modelValue:l.form.date,"onUpdate:modelValue":e[8]||(e[8]=e=>l.form.date=e),class:"ion-margin-bottom",label:"Дата та час події","label-placement":"floating",fill:"outline",mode:"md"},null,8,["modelValue"]),g(d,{modelValue:l.form.location,"onUpdate:modelValue":e[9]||(e[9]=e=>l.form.location=e),class:"ion-margin-bottom",label:"Звання, посада","label-placement":"floating",fill:"outline",mode:"md"},null,8,["modelValue"]),g(d,{modelValue:l.form.situation,"onUpdate:modelValue":e[10]||(e[10]=e=>l.form.situation=e),class:"ion-margin-bottom",label:"Обставини","label-placement":"floating",fill:"outline",mode:"md"},null,8,["modelValue"]),g(d,{modelValue:l.form.witnesses,"onUpdate:modelValue":e[11]||(e[11]=e=>l.form.witnesses=e),class:"ion-margin-bottom",label:"Свідки","label-placement":"floating",fill:"outline",mode:"md"},null,8,["modelValue"]),g(w,{modelValue:l.form.diagnosis,"onUpdate:modelValue":e[12]||(e[12]=e=>l.form.diagnosis=e),class:"ion-margin-bottom",label:"Попередній діагноз","label-placement":"floating","auto-grow":!0,fill:"outline",mode:"md"},null,8,["modelValue"]),g(w,{modelValue:l.form.help,"onUpdate:modelValue":e[13]||(e[13]=e=>l.form.help=e),class:"ion-margin-bottom",label:"Надана допомога","label-placement":"floating","auto-grow":!0,fill:"outline",mode:"md"},null,8,["modelValue"]),g(w,{modelValue:l.form.tq,"onUpdate:modelValue":e[14]||(e[14]=e=>l.form.tq=e),class:"ion-margin-bottom",label:"TQ","label-placement":"floating","auto-grow":!0,fill:"outline",mode:"md"},null,8,["modelValue"]),g(w,{modelValue:l.form.state,"onUpdate:modelValue":e[15]||(e[15]=e=>l.form.state=e),class:"ion-margin-bottom",label:"Стан в динаміці","label-placement":"floating","auto-grow":!0,fill:"outline",mode:"md"},null,8,["modelValue"]),g(w,{modelValue:l.form.additional,"onUpdate:modelValue":e[16]||(e[16]=e=>l.form.additional=e),class:"ion-margin-bottom",label:"В засобах індивідуального захисту","label-placement":"floating","auto-grow":!0,fill:"outline",mode:"md"},null,8,["modelValue"]),g(w,{modelValue:l.form.lost,"onUpdate:modelValue":e[17]||(e[17]=e=>l.form.lost=e),class:"ion-margin-bottom",label:"Втрачене майно","label-placement":"floating","auto-grow":!0,fill:"outline",mode:"md"},null,8,["modelValue"]),g(w,{modelValue:l.form.timePass,"onUpdate:modelValue":e[18]||(e[18]=e=>l.form.timePass=e),class:"ion-margin-bottom",label:"Час передачі на","label-placement":"floating","auto-grow":!0,fill:"outline",mode:"md"},null,8,["modelValue"]),g(w,{modelValue:l.form.evacuatedBy,"onUpdate:modelValue":e[19]||(e[19]=e=>l.form.evacuatedBy=e),class:"last-input",label:"Ким евакуйований","label-placement":"floating","auto-grow":!0,fill:"outline",mode:"md"},null,8,["modelValue"]),_("div",R,[g(k,{expand:"block",color:"primary",shape:"round",style:{width:"100%"},onClick:l.saveReport},{default:V((()=>[v(" Зберегти ")])),_:1},8,["onClick"])])]})),_:1})}],["__scopeId","data-v-ca1b6a29"]]))}}}));
