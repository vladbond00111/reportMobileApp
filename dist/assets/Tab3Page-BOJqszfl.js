import{_ as k,u as y,r,o as w,c as v,w as l,a as d,i as g,b as C}from"./index-CEtYVSE0.js";import{p as T}from"./useDatabase-o04XfflN.js";const P={setup(){const f=o=>{const t=o.target.files[0];if(!t)return;const e=new FileReader;e.onload=async a=>{const c=a.target.result,s=i(c);try{await u(s),alert("Дані успішно завантажено")}catch(p){alert("Помилка завантаження даних"),console.log(p)}},e.readAsText(t)},i=o=>{const t=o.split("\n"),e=t[0].split(","),a={Звання:"rank",ПІБ:"name",Позивний:"nickname",Телефон:"phone","Дата народження":"birthday",Посада:"workPosition",Відділення:"unit1",Взвод:"unit2",Рота:"unit3",Батальйон:"unit4",Бригада:"unit5"};return t.slice(1).map(s=>{const p=s.split(",");let _={};return e.forEach((m,x)=>{const b=a[m.trim()]||m.trim();_[b]=p[x].trim()}),_})},u=async o=>{for(let t of o)await T(t)},n=y();return{handleFileUpload:f,toStaffPage:()=>{n.push("/tabs/staff")}}}},S={class:"buttons-block",slot:"fixed"};function B(f,i,u,n,h,o){const t=r("ion-item"),e=r("ion-button"),a=r("ion-content"),c=r("ion-page");return w(),v(c,{style:{"margin-top":"56px"}},{default:l(()=>[d(a,null,{default:l(()=>[d(t,{style:{"margin-top":"50px"}},{default:l(()=>[g("input",{type:"file",onChange:i[0]||(i[0]=(...s)=>n.handleFileUpload&&n.handleFileUpload(...s)),accept:".csv"},null,32)]),_:1}),g("div",S,[d(e,{expand:"block",color:"primary",shape:"round",style:{width:"100%"},onClick:n.toStaffPage},{default:l(()=>[C(" Переглянути дані ")]),_:1},8,["onClick"])])]),_:1})]),_:1})}const I=k(P,[["render",B],["__scopeId","data-v-276e7f51"]]);export{I as default};
